<?xml version="1.0" encoding="utf-8" ?>
<opc:ModelDesign
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:xsd="http://www.w3.org/2001/XMLSchema"
	xmlns:opc="http://opcfoundation.org/UA/ModelDesign.xsd"
  xmlns:ua="http://opcfoundation.org/UA/"
  xmlns:uax="http://opcfoundation.org/UA/2008/02/Types.xsd"
	xmlns="http://industrial.softing.com/UA/Refrigerators"
  TargetNamespace="http://industrial.softing.com/UA/Refrigerators"
>
  <opc:Namespaces>
    <opc:Namespace Name="OpcUa" Prefix="Softing.Opc.Ua.Sdk" InternalPrefix="Opc.Ua.Server" XmlNamespace="http://opcfoundation.org/UA/2008/02/Types.xsd">http://opcfoundation.org/UA/</opc:Namespace>
    <opc:Namespace Name="Refrigerators" Prefix="Refrigerators" InternalPrefix="Refrigerators">http://industrial.softing.com/UA/Refrigerators</opc:Namespace>
  </opc:Namespaces>
  
  <!-- DataTypes --> 
  <opc:DataType SymbolicName="RefrigeratorStatusDataType" BaseType="ua:Structure">
    <opc:Fields>
      <opc:Field Name="MotorRunning" DataType="ua:Boolean"></opc:Field>
      <opc:Field Name="MotorTemperature" DataType="ua:Double"></opc:Field>
	  <opc:Field Name="ActualTemperature" DataType="ua:Double"></opc:Field>
    </opc:Fields>
  </opc:DataType>
  
  <opc:DataType SymbolicName="RefrigeratorState" BaseType="ua:Enumeration">
    <opc:Fields>
      <opc:Field Name="Stopped" Identifier="0"></opc:Field>
      <opc:Field Name="Running" Identifier="1"></opc:Field>      
      <opc:Field Name="Fault"   Identifier="2"></opc:Field>
    </opc:Fields>
  </opc:DataType>

  <!-- Methods -->
  <opc:Method SymbolicName="OpenCloseDoorMethodType" ModellingRule="Mandatory">
    <opc:InputArguments>
      <opc:Argument Name="Open/Close Door" DataType="ua:Boolean"></opc:Argument>
    </opc:InputArguments>
  </opc:Method>

  <!--VariableTypes -->
  <opc:VariableType SymbolicName="RefrigeratorAnalogType" BaseType="ua:AnalogItemType">	
	<opc:Description>Analog Variable for Refrigerator.</opc:Description>
  </opc:VariableType>
  
  <opc:VariableType SymbolicName="RefrigeratorSetpointType" BaseType="RefrigeratorAnalogType">	
	<opc:Description>SetPoint for Refrigerator.</opc:Description>
  </opc:VariableType>
  
  <!--ObjectTypes -->
  <opc:ObjectType SymbolicName="RefrigeratorObjectType">
	<opc:Description>A generic object defining a refrigerator model.</opc:Description>
    <opc:Children>
	  <opc:Variable SymbolicName="State" DataType="RefrigeratorState" ValueRank="Scalar" AccessLevel="ReadWrite">
		<opc:DefaultValue>
          <uax:Int32>1</uax:Int32>
        </opc:DefaultValue>
      </opc:Variable>
	  <opc:Variable SymbolicName="Status" DataType="RefrigeratorStatusDataType" ValueRank="Scalar" AccessLevel="ReadWrite">
		<opc:DefaultValue>
          <uax:ExtensionObject>
            <uax:Body>
              <RefrigeratorStatusDataType>
                <MotorRunning>false</MotorRunning>
                <MotorTemperature>30.0</MotorTemperature>
				<ActualTemperature>5.0</ActualTemperature>
              </RefrigeratorStatusDataType>
            </uax:Body>
          </uax:ExtensionObject>
        </opc:DefaultValue>
      </opc:Variable>
      <opc:Variable SymbolicName="SetPoint" DataType="ua:Double" ValueRank="Scalar" AccessLevel="ReadWrite" TypeDefinition="RefrigeratorSetpointType">
		<opc:DefaultValue>
          <uax:Double>5</uax:Double>
        </opc:DefaultValue>
      </opc:Variable>	  
      <opc:Variable SymbolicName="DoorOpened" DataType="ua:Boolean" ValueRank="Scalar" AccessLevel="Read" TypeDefinition="ua:DataItemType">
      </opc:Variable>
      <opc:Variable SymbolicName="LightStatus" DataType="ua:Boolean" ValueRank="Scalar" AccessLevel="Read" TypeDefinition="ua:DataItemType">
      </opc:Variable>
      <opc:Method SymbolicName="OpenCloseDoor" TypeDefinition="OpenCloseDoorMethodType" ModellingRule="Mandatory"></opc:Method>
    </opc:Children>
  </opc:ObjectType>
  
  <!-- Node Instances -->  
  <opc:Object SymbolicName="Devices" TypeDefinition="ua:BaseObjectType">	
	<!-- Link the instance back to the ObjectsFolder -->
	<opc:References>
		<opc:Reference IsInverse="true">
			<opc:ReferenceType>ua:Organizes</opc:ReferenceType>
			<opc:TargetId>ua:ObjectsFolder</opc:TargetId>
		</opc:Reference>
	</opc:References>
  </opc:Object>
 
  <opc:Object SymbolicName="Refrigerator1" TypeDefinition="RefrigeratorObjectType">
	<!-- Link the instance back to the ObjectsFolder -->
	<opc:References>
		<opc:Reference IsInverse="true">
			<opc:ReferenceType>ua:Organizes</opc:ReferenceType>
			<opc:TargetId>Devices</opc:TargetId>
		</opc:Reference>
	</opc:References>
  </opc:Object>
    
</opc:ModelDesign>